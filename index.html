<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang Qu·∫£n Tr·ªã Tool Cho Thu√™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        // --- Kh·ªüi t·∫°o Firebase ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, getDoc, getDocs, setDoc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // C·∫•u h√¨nh Firebase (Project: toolchothue)
        const CONFIG = {
            firebase: {
                apiKey: "AIzaSyDJu0KsERvaIsumIupZApM3i7S9bl_ihdo",
                authDomain: "toolchothue.firebaseapp.com",
                databaseURL: "https://toolchothue-default-rtdb.firebaseio.com",
                projectId: "toolchothue",
                storageBucket: "toolchothue.firebasestorage.app",
                messagingSenderId: "500092338170",
                appId: "1:500092338170:web:2ca1966c92f63321c5ee43",
                measurementId: "G-8JP0Q2R0NJ"
            },
            authDomainSuffix: "@toolchothue.web.app", 
            energy: {
                initial: 5
            }
        };

        // App ch√≠nh
        const firebaseApp = initializeApp(CONFIG.firebase);
        const auth = getAuth(firebaseApp);
        const db = getFirestore(firebaseApp);

        // App ph·ª• (ƒë·ªÉ t·∫°o user kh√¥ng m·∫•t session)
        const secondaryApp = initializeApp(CONFIG.firebase, "Secondary");
        const secondaryAuth = getAuth(secondaryApp);

        const SUPER_ADMIN = 'alisrr99'; // T√™n t√†i kho·∫£n TR√ôM

        // DOM Elements
        const loginSection = document.getElementById('login-section');
        const adminSection = document.getElementById('admin-section');
        const superAdminControls = document.getElementById('super-admin-controls');
        
        const loginForm = document.getElementById('login-form');
        const logoutBtn = document.getElementById('logout-btn');
        
        const createUserForm = document.getElementById('create-user-form');
        const createAdminForm = document.getElementById('create-admin-form');
        
        const userTableBody = document.getElementById('user-table-body');
        const refreshUsersBtn = document.getElementById('refresh-users-btn');
        const searchInput = document.getElementById('search-user-input');
        const searchBtn = document.getElementById('search-user-btn');
        const clearSearchBtn = document.getElementById('clear-search-btn');

        function showToast(message, type = 'info') {
            const colors = { success: 'bg-green-500', error: 'bg-red-500', info: 'bg-blue-500' };
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.className = `${colors[type]} text-white px-4 py-2 rounded shadow fixed top-4 right-4 z-50 animate-bounce`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        // --- AUTH & PERMISSION LOGIC ---
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                try {
                    // Ki·ªÉm tra quy·ªÅn trong Firestore
                    const userDoc = await getDoc(doc(db, 'users', user.uid));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        const username = userData.username || '';

                        // Logic ki·ªÉm tra quy·ªÅn: Ph·∫£i l√† 'admin' ho·∫∑c user ƒë·∫∑c bi·ªát 'alisrr99'
                        if (userData.role === 'admin' || username === SUPER_ADMIN) {
                            
                            // ƒêƒÉng nh·∫≠p th√†nh c√¥ng, hi·ªÉn th·ªã giao di·ªán Admin
                            loginSection.classList.add('hidden');
                            adminSection.classList.remove('hidden');
                            
                            // CHECK SUPER ADMIN: Ch·ªâ alisrr99 m·ªõi th·∫•y khu v·ª±c t·∫°o Admin
                            if (username === SUPER_ADMIN) {
                                superAdminControls.classList.remove('hidden');
                                showToast(`Ch√†o m·ª´ng Super Admin: ${username}`, 'success');
                            } else {
                                superAdminControls.classList.add('hidden');
                                showToast(`Ch√†o m·ª´ng Admin: ${username}`, 'success');
                            }

                            loadUsers();
                        } else {
                            // N·∫øu l√† User th∆∞·ªùng -> ƒê√Å RA NGO√ÄI
                            await signOut(auth);
                            showToast('T√†i kho·∫£n n√†y kh√¥ng c√≥ quy·ªÅn truy c·∫≠p Admin Panel!', 'error');
                            adminSection.classList.add('hidden');
                            loginSection.classList.remove('hidden');
                        }
                    } else {
                        // Tr∆∞·ªùng h·ª£p acc m·ªõi ch∆∞a c√≥ trong firestore (√≠t g·∫∑p n·∫øu code ƒë√∫ng)
                        // N·∫øu username nh·∫≠p v√†o kh·ªõp Super Admin th√¨ cho qua ƒë·ªÉ bootstrap
                        const emailUsername = user.email.split('@')[0];
                        if (emailUsername === SUPER_ADMIN) {
                             loginSection.classList.add('hidden');
                             adminSection.classList.remove('hidden');
                             superAdminControls.classList.remove('hidden');
                             // T·ª± fix data n·∫øu thi·∫øu
                             await setDoc(doc(db, 'users', user.uid), {
                                 username: SUPER_ADMIN,
                                 role: 'admin',
                                 energy: 99999,
                                 level: 'omega'
                             }, { merge: true });
                             loadUsers();
                        } else {
                            await signOut(auth);
                            showToast('L·ªói d·ªØ li·ªáu ng∆∞·ªùi d√πng. Vui l√≤ng li√™n h·ªá h·ªó tr·ª£.', 'error');
                        }
                    }
                } catch (e) {
                    console.error("L·ªói Auth:", e);
                    showToast('L·ªói x√°c th·ª±c quy·ªÅn h·∫°n.', 'error');
                    await signOut(auth);
                }
            } else {
                adminSection.classList.add('hidden');
                loginSection.classList.remove('hidden');
            }
        });

        // ƒêƒÉng nh·∫≠p
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            let identifier = document.getElementById('admin-username').value.trim();
            const password = document.getElementById('admin-password').value;
            if (!identifier) return showToast("Vui l√≤ng nh·∫≠p Username", "error");
            if (!identifier.includes('@')) identifier += CONFIG.authDomainSuffix;
            
            try {
                await signInWithEmailAndPassword(auth, identifier, password);
                // Logic onAuthStateChanged s·∫Ω t·ª± ch·∫°y sau khi sign in th√†nh c√¥ng
            } catch (err) {
                // N·∫øu ch∆∞a c√≥ user n√†o v√† ƒëang c·ªë login b·∫±ng alisrr99 -> T·∫°o lu√¥n (Bootstrap Super Admin)
                if (err.code === 'auth/user-not-found' && identifier.startsWith(SUPER_ADMIN)) {
                     try {
                        const cred = await createUserWithEmailAndPassword(auth, identifier, password);
                        await setDoc(doc(db, 'users', cred.user.uid), {
                            uid: cred.user.uid,
                            username: SUPER_ADMIN,
                            level: 'omega',
                            role: 'admin', // Super admin c≈©ng l√† admin
                            energy: 99999,
                            createdAt: serverTimestamp()
                        });
                        showToast('ƒê√£ kh·ªüi t·∫°o t√†i kho·∫£n Super Admin g·ªëc!', 'success');
                     } catch (createErr) {
                         showToast('L·ªói t·∫°o Super Admin: ' + createErr.message, 'error');
                     }
                } else {
                    showToast('Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u', 'error');
                }
            }
        });

        logoutBtn.addEventListener('click', async () => {
            await signOut(auth);
            location.reload();
        });

        // --- LOAD LIST USERS ---
        async function loadUsers(filterUsername) {
            userTableBody.innerHTML = '';
            try {
                const querySnapshot = await getDocs(collection(db, 'users'));
                const filter = filterUsername ? filterUsername.toLowerCase() : null;
                
                querySnapshot.forEach((docSnap) => {
                    const data = docSnap.data();
                    if (filter && !(data.username || '').toLowerCase().includes(filter)) return;

                    const tr = document.createElement('tr');
                    tr.className = 'border-b border-gray-700 hover:bg-gray-800 transition duration-150';
                    
                    // Style ri√™ng cho Admin v√† User
                    const isRowAdmin = data.role === 'admin';
                    if (isRowAdmin) tr.classList.add('bg-yellow-900/10'); // Highlight nh·∫π h√†ng admin

                    // C·ªôt UID
                    const uidTd = document.createElement('td');
                    uidTd.textContent = docSnap.id;
                    uidTd.className = 'px-4 py-3 text-xs text-gray-500 font-mono break-all max-w-[100px] truncate';
                    uidTd.title = docSnap.id;
                    
                    // C·ªôt Username
                    const nameTd = document.createElement('td');
                    if (data.username === SUPER_ADMIN) {
                         nameTd.innerHTML = `<span class="text-red-500 font-bold uppercase tracking-wider flex items-center gap-1">üëë ${data.username}</span>`;
                    } else if (isRowAdmin) {
                         nameTd.innerHTML = `<span class="text-yellow-400 font-bold flex items-center gap-1">üõ°Ô∏è ${data.username}</span>`;
                    } else {
                         nameTd.innerHTML = `<span class="text-cyan-400 font-medium">${data.username || 'No Name'}</span>`;
                    }
                    nameTd.className = 'px-4 py-3';
                    
                    // C·ªôt Info (G·ªôp Phone + Tele cho g·ªçn)
                    const infoTd = document.createElement('td');
                    infoTd.className = 'px-4 py-3 text-sm';
                    let infoHtml = '';
                    if (data.phoneNumber) infoHtml += `<div class="text-gray-300">üì± ${data.phoneNumber}</div>`;
                    if (data.telegram) {
                         const cleanTele = data.telegram.replace('@', '');
                         infoHtml += `<a href="https://t.me/${cleanTele}" target="_blank" class="text-blue-400 hover:text-blue-300 block">‚úàÔ∏è ${data.telegram}</a>`;
                    }
                    if (!infoHtml) infoHtml = '<span class="text-gray-600">-</span>';
                    infoTd.innerHTML = infoHtml;

                    // C·ªôt Energy
                    const energyTd = document.createElement('td');
                    energyTd.innerHTML = `<span class="font-mono text-lg ${data.energy > 0 ? 'text-green-400' : 'text-red-400'}">${data.energy ?? 0}</span>`;
                    energyTd.className = 'px-4 py-3 text-center';

                    // C·ªôt Rank
                    const levelTd = document.createElement('td');
                    const levelSelect = document.createElement('select');
                    levelSelect.className = 'bg-gray-900 text-xs text-white border border-gray-600 rounded px-2 py-1 focus:outline-none focus:border-cyan-500 transition-colors';
                    const levels = [
                        { value: 'normal', label: 'Th∆∞·ªùng' },
                        { value: 'vip', label: 'VIP' },
                        { value: 'v-vip', label: 'V-VIP' },
                        { value: 'premium', label: 'Premium' },
                        { value: 'omega', label: 'OMEGA' }
                    ];
                    levels.forEach(({ value, label }) => {
                        const opt = document.createElement('option');
                        opt.value = value;
                        opt.textContent = label;
                        levelSelect.appendChild(opt);
                    });
                    levelSelect.value = data.level || 'normal';
                    
                    // M√†u s·∫Øc cho rank
                    const updateRankColor = () => {
                         const val = levelSelect.value;
                         if (val === 'omega') levelSelect.style.color = '#00FF00'; // Green
                         else if (val === 'premium') levelSelect.style.color = '#FF00FF'; // Magenta
                         else if (val === 'v-vip') levelSelect.style.color = '#FF4500'; // OrangeRed
                         else if (val === 'vip') levelSelect.style.color = '#FFD700'; // Gold
                         else levelSelect.style.color = '#ccc';
                    };
                    updateRankColor();

                    levelSelect.onchange = async () => {
                        try {
                            await updateDoc(doc(db, 'users', docSnap.id), { level: levelSelect.value });
                            showToast('ƒê√£ c·∫≠p nh·∫≠t c·∫•p ƒë·ªô', 'success');
                            updateRankColor();
                        } catch (err) { showToast('L·ªói update', 'error'); }
                    };
                    levelTd.appendChild(levelSelect);
                    levelTd.className = 'px-4 py-3';

                    // C·ªôt Thao t√°c Energy
                    const actionTd = document.createElement('td');
                    const actionDiv = document.createElement('div');
                    actionDiv.className = 'flex items-center space-x-2';
                    
                    const amountInput = document.createElement('input');
                    amountInput.type = 'number';
                    amountInput.className = 'w-16 bg-gray-800 border border-gray-600 rounded px-1 py-1 text-center text-white text-sm focus:border-cyan-500 outline-none';
                    amountInput.placeholder = '0';

                    const btnAdd = document.createElement('button');
                    btnAdd.textContent = '+';
                    btnAdd.className = 'bg-cyan-600 hover:bg-cyan-500 text-white w-7 h-7 rounded flex items-center justify-center font-bold transition';
                    btnAdd.onclick = () => handleEnergyChange(docSnap.id, data.energy, amountInput.value, true);

                    const btnSub = document.createElement('button');
                    btnSub.textContent = '-';
                    btnSub.className = 'bg-red-600 hover:bg-red-500 text-white w-7 h-7 rounded flex items-center justify-center font-bold transition';
                    btnSub.onclick = () => handleEnergyChange(docSnap.id, data.energy, amountInput.value, false);

                    actionDiv.append(amountInput, btnAdd, btnSub);
                    actionTd.appendChild(actionDiv);
                    actionTd.className = 'px-4 py-3';

                    tr.appendChild(uidTd);
                    tr.appendChild(nameTd);
                    tr.appendChild(infoTd);
                    tr.appendChild(energyTd);
                    tr.appendChild(levelTd);
                    tr.appendChild(actionTd);
                    userTableBody.appendChild(tr);
                });
            } catch (error) {
                console.error(error);
                showToast('L·ªói t·∫£i danh s√°ch user', 'error');
            }
        }

        async function handleEnergyChange(uid, currentEnergy, amountStr, isAdding) {
            const amount = parseInt(amountStr);
            if (!amount || amount <= 0) return showToast('Vui l√≤ng nh·∫≠p s·ªë h·ª£p l·ªá', 'error');
            
            const current = currentEnergy || 0;
            const newVal = isAdding ? current + amount : current - amount;
            if (newVal < 0) return showToast('Kh√¥ng th·ªÉ tr·ª´ √¢m ti·ªÅn', 'error');

            try {
                await updateDoc(doc(db, 'users', uid), { energy: newVal });
                showToast(`ƒê√£ ${isAdding ? 'c·ªông' : 'tr·ª´'} ${amount} nƒÉng l∆∞·ª£ng`, 'success');
                loadUsers(); // Reload l·∫°i b·∫£ng
            } catch (e) {
                showToast('L·ªói c·∫≠p nh·∫≠t nƒÉng l∆∞·ª£ng', 'error');
            }
        }

        // --- T·∫†O USER TH∆Ø·ªúNG ---
        createUserForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('new-username').value.trim().toLowerCase();
            const password = document.getElementById('new-password').value;
            const phone = document.getElementById('new-phone').value.trim();
            const telegram = document.getElementById('new-telegram').value.trim();
            const energy = parseInt(document.getElementById('new-energy').value) || 0;

            if (!username || !password) return showToast('Thi·∫øu th√¥ng tin ƒëƒÉng nh·∫≠p', 'error');

            try {
                // T·∫°o tr√™n app ph·ª• ƒë·ªÉ kh√¥ng m·∫•t session
                const email = `${username}${CONFIG.authDomainSuffix}`;
                const cred = await createUserWithEmailAndPassword(secondaryAuth, email, password);
                
                await setDoc(doc(db, 'users', cred.user.uid), {
                    uid: cred.user.uid,
                    username: username,
                    phoneNumber: phone,
                    telegram: telegram,
                    energy: energy,
                    level: 'normal',
                    role: 'user', // Quan tr·ªçng: L√† User th∆∞·ªùng
                    createdAt: serverTimestamp()
                });

                await signOut(secondaryAuth); // Clear session ph·ª•
                showToast(`ƒê√£ t·∫°o User: ${username}`, 'success');
                createUserForm.reset();
                loadUsers();
            } catch (err) {
                showToast('L·ªói t·∫°o user: ' + err.message, 'error');
            }
        });

        // --- T·∫†O ADMIN (CH·ªà ALISRR99 D√ôNG) ---
        createAdminForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('new-admin-username').value.trim().toLowerCase();
            const password = document.getElementById('new-admin-password').value;

            if (!username || !password) return showToast('Thi·∫øu th√¥ng tin Admin m·ªõi', 'error');

            try {
                const email = `${username}${CONFIG.authDomainSuffix}`;
                const cred = await createUserWithEmailAndPassword(secondaryAuth, email, password);
                
                await setDoc(doc(db, 'users', cred.user.uid), {
                    uid: cred.user.uid,
                    username: username,
                    role: 'admin',  // Quan tr·ªçng: L√† Admin
                    energy: 9999,   // Admin ƒë∆∞·ª£c c·∫•p nhi·ªÅu nƒÉng l∆∞·ª£ng test
                    level: 'omega',
                    createdAt: serverTimestamp()
                });

                await signOut(secondaryAuth);
                showToast(`ƒê√£ t·∫°o th√†nh c√¥ng Admin: ${username}`, 'success');
                createAdminForm.reset();
                loadUsers();
            } catch (err) {
                showToast('L·ªói t·∫°o Admin: ' + err.message, 'error');
            }
        });

        refreshUsersBtn.addEventListener('click', () => loadUsers());
        searchBtn.addEventListener('click', () => loadUsers(searchInput.value.trim()));
        clearSearchBtn.addEventListener('click', () => { searchInput.value = ''; loadUsers(); });

    </script>
</head>
<body class="bg-[#0A192F] text-gray-100 font-sans min-h-screen flex flex-col items-center p-4">
    
    <!-- HEADER -->
    <header class="w-full max-w-6xl flex justify-between items-center py-6 mb-4">
        <h1 class="text-3xl font-bold tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 uppercase">
            Admin Control Panel
        </h1>
        <div class="text-xs text-gray-500">System v2.1</div>
    </header>
    
    <!-- LOGIN SECTION -->
    <section id="login-section" class="w-full max-w-md bg-gray-800/80 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-gray-700">
        <div class="text-center mb-8">
            <div class="inline-block p-4 rounded-full bg-gray-900 mb-4 border border-cyan-500/30">
                <span class="text-4xl">üîê</span>
            </div>
            <h2 class="text-xl font-semibold text-white">ƒêƒÉng Nh·∫≠p Qu·∫£n Tr·ªã</h2>
            <p class="text-sm text-gray-400 mt-2">Khu v·ª±c d√†nh ri√™ng cho Admin</p>
        </div>
        <form id="login-form" class="space-y-5">
            <div>
                <label class="block text-xs font-bold text-gray-400 mb-1 uppercase">Username</label>
                <input id="admin-username" type="text" class="w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition text-white" placeholder="Nh·∫≠p username..." />
            </div>
            <div>
                <label class="block text-xs font-bold text-gray-400 mb-1 uppercase">M·∫≠t kh·∫©u</label>
                <input id="admin-password" type="password" class="w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-lg focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition text-white" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
            <button type="submit" class="w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-3 rounded-lg shadow-lg transform hover:scale-[1.02] transition-all duration-200">
                X√ÅC TH·ª∞C & TRUY C·∫¨P
            </button>
        </form>
    </section>

    <!-- ADMIN DASHBOARD -->
    <section id="admin-section" class="w-full hidden max-w-7xl space-y-8 pb-10">
        
        <!-- Top Bar -->
        <div class="flex justify-between items-center bg-gray-800 p-4 rounded-xl border border-gray-700 shadow-lg">
            <div class="flex items-center space-x-3">
                <span class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></span>
                <h2 class="text-lg font-semibold text-gray-200">H·ªá th·ªëng ƒëang ho·∫°t ƒë·ªông</h2>
            </div>
            <button id="logout-btn" class="flex items-center space-x-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/50 px-4 py-2 rounded-lg text-sm font-bold transition">
                <span>ƒêƒÉng xu·∫•t</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
            </button>
        </div>

        <!-- KHU V·ª∞C SUPER ADMIN (Ch·ªâ alisrr99 th·∫•y) -->
        <div id="super-admin-controls" class="hidden relative group">
            <div class="absolute -inset-1 bg-gradient-to-r from-yellow-600 to-red-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000"></div>
            <div class="relative bg-gray-900 p-6 rounded-xl border border-yellow-600/50 shadow-xl">
                <div class="flex items-center justify-between mb-6 border-b border-yellow-600/30 pb-4">
                    <h3 class="text-xl font-bold text-yellow-500 flex items-center gap-2">
                        üëë KHU V·ª∞C SUPER ADMIN
                    </h3>
                    <span class="text-xs font-mono text-yellow-700 bg-yellow-900/30 px-2 py-1 rounded border border-yellow-800">alisrr99 only</span>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 items-end">
                    <div class="md:col-span-3">
                        <label class="block text-sm text-gray-400 mb-2">T·∫°o t√†i kho·∫£n Admin M·ªõi (Quy·ªÅn qu·∫£n l√Ω)</label>
                        <form id="create-admin-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input id="new-admin-username" type="text" class="px-4 py-2 bg-black border border-yellow-700 rounded text-yellow-100 placeholder-gray-600 focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 outline-none" placeholder="Username Admin m·ªõi" required />
                            <input id="new-admin-password" type="password" class="px-4 py-2 bg-black border border-yellow-700 rounded text-yellow-100 placeholder-gray-600 focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 outline-none" placeholder="M·∫≠t kh·∫©u" required />
                            <button type="submit" class="md:col-span-2 mt-2 bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-2 rounded shadow-lg shadow-yellow-900/40 transition">
                                ‚ö° C·∫§P QUY·ªÄN ADMIN
                            </button>
                        </form>
                    </div>
                    <div class="hidden md:block text-xs text-gray-500 italic border-l border-gray-700 pl-4">
                        * T√†i kho·∫£n ƒë∆∞·ª£c t·∫°o t·∫°i ƒë√¢y s·∫Ω c√≥ quy·ªÅn truy c·∫≠p Admin Panel.<br>
                        * Kh√¥ng th·ªÉ t·∫°o th√™m Admin kh√°c.
                    </div>
                </div>
            </div>
        </div>

        <!-- CREATE REGULAR USER (D√†nh cho c·∫£ Super Admin & Admin th∆∞·ªùng) -->
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700">
            <h3 class="text-lg font-bold text-green-400 mb-6 flex items-center gap-2 border-b border-gray-700 pb-2">
                <span>‚ûï</span> T·∫°o Kh√°ch Thu√™ M·ªõi (User th∆∞·ªùng)
            </h3>
            <form id="create-user-form" class="grid grid-cols-1 md:grid-cols-6 gap-4">
                <div class="md:col-span-1">
                    <input id="new-username" type="text" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded focus:border-green-500 outline-none transition" placeholder="Username *" required />
                </div>
                <div class="md:col-span-1">
                    <input id="new-password" type="password" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded focus:border-green-500 outline-none transition" placeholder="Password *" required />
                </div>
                <div class="md:col-span-1">
                    <input id="new-phone" type="text" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded focus:border-green-500 outline-none transition" placeholder="SƒêT" />
                </div>
                <div class="md:col-span-1">
                    <input id="new-telegram" type="text" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded focus:border-green-500 outline-none transition" placeholder="Telegram (@abc)" />
                </div>
                <div class="md:col-span-1">
                    <input id="new-energy" type="number" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded focus:border-green-500 outline-none transition" placeholder="Energy (M·∫∑c ƒë·ªãnh 0)" />
                </div>
                <div class="md:col-span-1">
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-2 rounded shadow transition h-full">T·∫°o User</button>
                </div>
            </form>
        </div>

        <!-- USER LIST -->
        <div class="bg-gray-800 rounded-xl shadow-lg border border-gray-700 overflow-hidden">
            <div class="p-4 bg-gray-800 border-b border-gray-700 flex flex-col md:flex-row justify-between items-center gap-4">
                <h3 class="text-lg font-bold text-purple-400">Danh s√°ch t√†i kho·∫£n</h3>
                <div class="flex w-full md:w-auto space-x-2">
                    <div class="relative flex-1 md:w-64">
                        <input id="search-user-input" type="text" class="w-full pl-8 pr-3 py-1.5 bg-gray-900 border border-gray-600 rounded text-sm focus:border-purple-500 outline-none transition" placeholder="T√¨m theo t√™n..." />
                        <span class="absolute left-2.5 top-1.5 text-gray-500">üîç</span>
                    </div>
                    <button id="search-user-btn" class="bg-purple-600 hover:bg-purple-500 px-4 py-1.5 rounded text-sm font-bold text-white transition">T√¨m</button>
                    <button id="clear-search-btn" class="bg-gray-700 hover:bg-gray-600 px-4 py-1.5 rounded text-sm text-white transition">X√≥a</button>
                    <button id="refresh-users-btn" class="bg-blue-600 hover:bg-blue-500 px-4 py-1.5 rounded text-sm font-bold text-white transition flex items-center gap-1">
                        <span>‚Üª</span> Refresh
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm text-left">
                    <thead class="bg-gray-900 text-gray-400 uppercase text-xs tracking-wider">
                        <tr>
                            <th class="px-4 py-3 font-medium">UID</th>
                            <th class="px-4 py-3 font-medium">Username</th>
                            <th class="px-4 py-3 font-medium">Li√™n h·ªá</th>
                            <th class="px-4 py-3 font-medium text-center">Energy</th>
                            <th class="px-4 py-3 font-medium">C·∫•p b·∫≠c</th>
                            <th class="px-4 py-3 font-medium">N·∫°p/Tr·ª´</th>
                        </tr>
                    </thead>
                    <tbody id="user-table-body" class="divide-y divide-gray-700">
                        <!-- Data will come here -->
                    </tbody>
                </table>
            </div>
            <div class="p-3 bg-gray-900 text-center text-xs text-gray-600">
                Hi·ªÉn th·ªã t·ªëi ƒëa k·∫øt qu·∫£ m·ªõi nh·∫•t. S·ª≠ d·ª•ng t√¨m ki·∫øm ƒë·ªÉ l·ªçc c·ª• th·ªÉ.
            </div>
        </div>
    </section>
</body>
</html>
